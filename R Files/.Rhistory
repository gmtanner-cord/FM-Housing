`Total Bedrooms`+
`Garage Stalls`,
data=FM_Housing_Clean)
testedModel <- housingLinear %>% predict(FM_Housing_Test)
resamples[i] <- postResample(testedModel, FM_Housing_Test$`Sold Price`)[2]
}
summary(housingLinear)
mean(resamples)
sd(resamples)
#ggplot() + geom_point(mapping=aes(x=predict(housingLinear), y=resid(housingLinear)), alpha=0.25, size=0.75)
n <- 20
resamples <- vector(length=n)
for(i in 1:n) {
trainIndex <- createDataPartition(FM_Housing_Clean$`Sold Price`, p=0.8, list=FALSE)
FM_Housing_Train <- FM_Housing_Clean[trainIndex,]
FM_Housing_Test <- FM_Housing_Clean[-trainIndex,]
housingLinear <- lm(log(`Sold Price`)~
`Total SqFt.`+
`Year Built`+
`Start Date`+
`Total Bedrooms`+
`Garage Stalls`,
data=FM_Housing_Train)
testedModel <- housingLinear %>% predict(FM_Housing_Test)
resamples[i] <- postResample(testedModel, FM_Housing_Test$`Sold Price`)[2]
}
summary(housingLinear)
mean(resamples)
sd(resamples)
#ggplot() + geom_point(mapping=aes(x=predict(housingLinear), y=resid(housingLinear)), alpha=0.25, size=0.75)
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(50)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(rvest)
library(magrittr)
library(stringi)
FM_Housing_Raw <- read_csv(unz("../Data/FM_Housing_Raw.zip", "FM_Housing_Raw.csv"), col_types = cols(
`Lease Term` = col_character(),
`Directions` = col_character(),
`Water Frontage Length` = col_integer()
))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(rvest)
library(magrittr)
library(stringi)
FM_Housing_Raw <- read_csv(unz("../Data/FM_Housing_Raw.zip", "FM_Housing_Raw.csv"), col_types = cols(
`Lease Term` = col_character(),
`Directions` = col_character(),
`Water Frontage Length` = col_integer()
))
FM_Housing_Clean <- FM_Housing_Raw %>% select(-c("Property Type", "Card Format")) #All properties are Residential for both Property Type and Card Format variables
FM_Housing_Clean <- FM_Housing_Clean %>% select(-c("List Number", "Directions")) #Arbitrary values not useful for data mining
FM_Housing_Clean$`Year Built`[FM_Housing_Clean$`Year Built` < 1600 | FM_Housing_Clean$`Year Built` > 2021] <- NA
FM_Housing_Clean <- FM_Housing_Clean %>% mutate("List Price Change":=`List Price`-`Original List Price`)
FM_Housing_Clean <- FM_Housing_Clean %>% mutate("Sold/List Price Difference":=`Sold Price` - `List Price`)
FM_Housing_Clean <- FM_Housing_Clean %>% mutate("Sold/Original List Price Difference":=`Sold Price` - `Original List Price`)
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(50)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(25)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(25)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
View(row)
tract
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(4)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(7)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[1,1])
lat <- toString(latlonhead[1,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tract <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
tract
}
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
get_tract <-  function(x,y) {
return(tract)
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(100)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
row <- latlonhead[i,]
# do stuff with row
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("TRACT\\: (\\d+)")
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)", [2])
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)" [2])
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)"[2])
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[2]
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)", \\2)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)", "\\2")
# %>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[,2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)",)[,2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match_all("TRACT\\: (\\d+)")[,2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("(TRACT\\:) (\\d+)")[,2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[,1]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[,1]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")[2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match(,"TRACT\\: (\\d+)")
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("?<=TRACT\\: (\\d+)")
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
?html_text
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% stri_match("TRACT\\: (\\d+)")
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% stri_match_regex("TRACT\\: (\\d+)")
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% stri_match("TRACT\\: (\\d+)", regex)
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_match("TRACT\\: (\\d+)")
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("TRACT\\: \\d+") %>% parse_number()
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("TRACT\\: \\d+") %>% parse_number()
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("TRACT\\: \\d+")[2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract(pattern="TRACT\\: \\d+")[2]
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% str_extract(html_text(), "TRACT\\: \\d+")[2]
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
#%>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>% str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
latlonframe <- FM_Housing_Clean %>% select(`Geo Lon`, `Geo Lat`)
latlonhead <- latlonframe %>% head(10)
tractvec <- vector(length = nrow(latlonhead))
for(i in 1:nrow(latlonhead)) {
lon <- toString(latlonhead[i,1])
lat <- toString(latlonhead[i,2])
latlon <- read_html(paste0("https://geocoding.geo.census.gov/geocoder/geographies/coordinates?x=",lon,"&y=",lat,"&benchmark=4&vintage=4"))
tractvec[i] <- html_node(latlon,"#pl_gov_census_geo_geocoder_domain_GeographyResult") %>% html_children() %>% extract(5) %>% html_text() %>%
str_extract("(?<=TRACT\\: )\\d+")
}
View(tractvec)
