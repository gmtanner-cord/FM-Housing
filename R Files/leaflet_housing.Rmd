---
title: "leaflet"
author: "Jake Peters"
date: "7/8/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(leaflet)
library(tidyverse)
library(readxl)
library(lubridate)
library(stringr)
library(caret)
library(lme4)
library(htmltools)
```


```{r}
FM_Housing_Clean <- read_csv(unz("../Data/FM_Housing_Clean.zip", "FM_Housing_Clean.csv"))
```


```{r}
maptypes <- c("MapQuestOpen.Aerial",
               "Stamen.TerrainBackground",
               "Esri.WorldImagery",
               "OpenStreetMap",
               "Stamen.Watercolor")


FM_Housing_trunc <- FM_Housing_Clean %>% head(7119)
leaflet_finder <- rename(FM_Housing_trunc, "elat"="Geo Lat" , "elon"="Geo Lon")

map <- leaflet() %>%
  addProviderTiles(maptypes[4]) %>%
  addCircleMarkers(lng = leaflet_finder$elon, lat = leaflet_finder$elat,
             clusterOptions = markerClusterOptions(maxClusterRadius = 100, disableClusteringAtZoom = 16, spiderfyOnMaxZoom = FALSE), radius = 5, 
  label = lapply(paste0("<img src=",leaflet_finder$`Photo URL`,"><br>",leaflet_finder$`Sold Price` ,"<br>",leaflet_finder$`Street Address`), HTML), labelOptions=labelOptions(style=list("text-align"="center"))
             )

map

```


