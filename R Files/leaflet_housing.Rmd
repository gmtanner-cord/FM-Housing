---
title: "leaflet"
author: "Jake Peters"
date: "7/8/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#setwd("C:/Users/13204/Documents/Github/")
library(leaflet)
library(tidyverse)
library(readxl)
library(lubridate)
library(stringr)
library(caret)
library(lme4)
library(htmltools)
```
```{r}
FM_Housing_Clean <- read_csv(unz("../Data/FM_Housing_Clean.zip", "FM_Housing_Clean.csv"))

```

## R Markdown


```{r}
maptypes <- c("MapQuestOpen.Aerial",
               "Stamen.TerrainBackground",
               "Esri.WorldImagery",
               "OpenStreetMap",
               "Stamen.Watercolor")


FM_Housing_trunc <- FM_Housing_Clean %>% head(54766)
leaflet_finder <- rename(FM_Housing_trunc, "elat"="Geo Lat" , "elon"="Geo Lon")

map <- leaflet() %>%
  addProviderTiles(maptypes[4]) %>%
  addCircleMarkers(lng = leaflet_finder$elon, lat = leaflet_finder$elat,
             clusterOptions = markerClusterOptions(maxClusterRadius = 100, disableClusteringAtZoom = 16, spiderfyOnMaxZoom = FALSE), radius = 5, 
  label = lapply(paste0("<img src=",leaflet_finder$`Photo URL`,">", "<br>", "$ ",leaflet_finder$`Sold Price` , "<br>",leaflet_finder$`Street Address`, "<br>"), HTML), labelOptions = labelOptions(style=list("text-align" ="center"))
             )

map

```

```{r}
View(FM_Housing_Clean[54767,])
```

